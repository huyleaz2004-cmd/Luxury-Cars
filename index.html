<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>RoyalCars ‚Äì Showroom √î T√¥ H√†ng Hi·ªáu</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    /* ========== RESET C∆† B·∫¢N ========== */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      background: #f3f6fb;
      color: #111827;
    }
    a {
      color: inherit;
      text-decoration: none;
    }
    button {
      cursor: pointer;
      border: none;
      background: none;
      font-family: inherit;
    }
    ul {
      list-style: none;
    }

    :root {
      --primary: #5b21ff;     /* t√≠m ch·ªß ƒë·∫°o */
      --primary-soft: #ede9ff;
      --primary-dark: #4c1d95;
      --accent: #f97316;      /* cam ƒëi·ªÉm nh·∫•n */
      --danger: #ef4444;
      --bg: #f3f6fb;
      --card-bg: #ffffff;
      --radius-xl: 22px;
      --shadow-soft: 0 14px 40px rgba(15, 23, 42, 0.16);
    }

    /* ========== HEADER ========== */
    header {
      position: sticky;
      top: 0;
      z-index: 50;
      background: linear-gradient(90deg, #4f46e5, #7c3aed);
      color: #fff;
      box-shadow: 0 10px 25px rgba(15, 23, 42, 0.4);
    }
    .header-inner {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 16px;
    }
    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .logo-icon {
      width: 38px;
      height: 38px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #ffffff, #f97316 40%, #1f2937 90%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      font-weight: 800;
    }
    .logo-text-main {
      font-weight: 800;
      font-size: 20px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }
    .logo-text-sub {
      font-size: 11px;
      opacity: 0.8;
    }

    nav {
      display: flex;
      align-items: center;
      gap: 18px;
      font-size: 14px;
    }
    nav a {
      padding: 6px 10px;
      border-radius: 999px;
      transition: background 0.18s, transform 0.18s;
    }
    nav a:hover {
      background: rgba(15, 23, 42, 0.24);
      transform: translateY(-1px);
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .icon-btn {
      position: relative;
      width: 34px;
      height: 34px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.22);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-size: 15px;
      transition: background 0.18s, transform 0.18s;
    }
    .icon-btn:hover {
      background: rgba(0, 0, 0, 0.45);
      transform: translateY(-1px);
    }
    .icon-badge {
      position: absolute;
      top: -4px;
      right: -4px;
      min-width: 18px;
      height: 18px;
      padding: 0 4px;
      border-radius: 999px;
      background: #f97316;
      color: #fff;
      font-size: 11px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .avatar {
      border-radius: 50%;
      background: linear-gradient(135deg, #f9fafb, #e5e7eb);
      color: #111827;
      font-weight: 700;
    }
    .avatar span {
      font-size: 15px;
    }

    .account-wrapper {
      position: relative;
    }
    .account-menu {
      position: absolute;
      top: 40px;
      right: 0;
      width: 210px;
      border-radius: 18px;
      background: #fff;
      box-shadow: var(--shadow-soft);
      padding: 8px 0;
      color: #111827;
      display: none;
      z-index: 30;
    }
    .account-menu.open {
      display: block;
    }
    .account-menu button {
      width: 100%;
      text-align: left;
      padding: 10px 16px;
      font-size: 14px;
      background: transparent;
    }
    .account-menu button:hover {
      background: #f3f4ff;
    }

    .cart-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 4px;
    }

    /* ========== HERO SLIDER ========== */
    .hero {
      position: relative;
      overflow: hidden;
      background: radial-gradient(circle at 0% 0%, #1e293b, #020617);
      color: #fff;
    }
    .hero-inner {
      max-width: 1200px;
      margin: 0 auto;
      padding: 26px 16px 34px;
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 1fr);
      gap: 24px;
      align-items: center;
    }
    @media (max-width: 860px) {
      .hero-inner {
        grid-template-columns: 1fr;
      }
    }
    .hero-copy h1 {
      font-size: 32px;
      line-height: 1.15;
      margin-bottom: 12px;
    }
    .hero-copy p {
      font-size: 14px;
      opacity: 0.9;
      max-width: 480px;
    }
    .hero-badges {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin: 16px 0 20px;
    }
    .hero-badge {
      padding: 5px 10px;
      border-radius: 999px;
      border: 1px solid rgba(248, 250, 252, 0.3);
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      opacity: 0.9;
    }

    .hero-cta {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    .hero-cta-primary {
      padding: 9px 18px;
      border-radius: 999px;
      background: #f97316;
      color: #fff;
      font-weight: 600;
      font-size: 14px;
      box-shadow: 0 10px 30px rgba(248, 113, 22, 0.6);
    }
    .hero-cta-secondary {
      padding: 9px 16px;
      border-radius: 999px;
      font-size: 14px;
      background: transparent;
      border: 1px solid rgba(248, 250, 252, 0.45);
      color: #e5e7eb;
    }

    .hero-slider {
      position: relative;
      height: 260px;
      border-radius: 24px;
      overflow: hidden;
      box-shadow: 0 18px 48px rgba(15, 23, 42, 0.7);
    }
    .hero-slide {
      position: absolute;
      inset: 0;
      opacity: 0;
      transition: opacity 0.7s ease-in-out;
      background-size: cover;
      background-position: center;
      display: flex;
      align-items: flex-end;
      justify-content: flex-start;
    }
    .hero-slide::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 10% 0%, rgba(15, 23, 42, 0.1), rgba(15, 23, 42, 0.88));
    }
    .hero-slide.active {
      opacity: 1;
    }
    .hero-slide-content {
      position: relative;
      padding: 18px 20px;
      color: #e5e7eb;
    }
    .hero-slide-title {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 4px;
    }
    .hero-slide-line {
      font-size: 13px;
      opacity: 0.9;
    }
    .hero-dots {
      position: absolute;
      bottom: 10px;
      right: 18px;
      display: flex;
      gap: 6px;
      z-index: 5;
    }
    .hero-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: rgba(148, 163, 184, 0.5);
    }
    .hero-dot.active {
      background: #f97316;
      width: 18px;
    }

    /* ========== MAIN LAYOUT ========== */
    main {
      max-width: 1200px;
      margin: 22px auto 80px;
      padding: 0 16px;
    }

    /* Gi·ªõi thi·ªáu shop */
    .about {
      background: #0f172a;
      color: #e5e7eb;
      border-radius: 24px;
      padding: 20px 20px 18px;
      display: grid;
      grid-template-columns: minmax(0, 2fr) minmax(0, 1.2fr);
      gap: 18px;
      box-shadow: 0 16px 40px rgba(15, 23, 42, 0.66);
    }
    @media (max-width: 860px) {
      .about {
        grid-template-columns: 1fr;
      }
    }
    .about h2 {
      font-size: 20px;
      margin-bottom: 8px;
    }
    .about p {
      font-size: 13px;
      opacity: 0.9;
    }
    .about-list {
      font-size: 13px;
      margin: 12px 0 0;
    }
    .about-list li {
      margin-bottom: 6px;
      display: flex;
      gap: 6px;
      align-items: flex-start;
    }
    .bullet {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: #22c55e;
      margin-top: 5px;
    }

    .social-block {
      background: rgba(15, 23, 42, 0.75);
      border-radius: 18px;
      padding: 10px 12px 12px;
      font-size: 13px;
    }
    .social-title {
      font-weight: 600;
      margin-bottom: 8px;
    }
    .social-links {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    .social-links a {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 999px;
      background: #111827;
      font-size: 12px;
      transition: background 0.18s, transform 0.18s;
    }
    .social-links a span.icon {
      width: 18px;
      height: 18px;
      border-radius: 999px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
    }
    .social-links a.facebook span.icon {
      background: #2563eb;
    }
    .social-links a.tiktok span.icon {
      background: #0f172a;
    }
    .social-links a.instagram span.icon {
      background: linear-gradient(135deg, #f97316, #db2777, #7c3aed);
    }
    .social-links a:hover {
      background: #1e293b;
      transform: translateY(-1px);
    }

    /* ========== FILTER + GRID S·∫¢N PH·∫®M ========== */
    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 28px;
      margin-bottom: 12px;
      gap: 10px;
      flex-wrap: wrap;
    }
    .section-header h2 {
      font-size: 20px;
    }
    .section-header p {
      font-size: 13px;
      color: #6b7280;
    }

    .brand-filters {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    .brand-filter {
      padding: 5px 12px;
      font-size: 12px;
      border-radius: 999px;
      border: 1px solid #e5e7eb;
      background: #fff;
      color: #4b5563;
      transition: background 0.18s, border-color 0.18s, color 0.18s, transform 0.18s;
    }
    .brand-filter.active {
      background: var(--primary);
      border-color: transparent;
      color: #fff;
      transform: translateY(-1px);
      box-shadow: 0 10px 30px rgba(79, 70, 229, 0.5);
    }
    .brand-filter:hover {
      border-color: #c4b5fd;
    }

    .product-grid {
      display: grid;
      gap: 16px;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      margin-top: 8px;
    }
    .product-card {
      background: var(--card-bg);
      border-radius: var(--radius-xl);
      padding: 12px 12px 14px;
      box-shadow: 0 14px 38px rgba(15, 23, 42, 0.14);
      display: flex;
      flex-direction: column;
      transition: transform 0.18s ease, box-shadow 0.18s ease, border 0.18s ease;
      border: 1px solid transparent;
    }
    .product-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 18px 50px rgba(15, 23, 42, 0.22);
      border-color: #e5e7eb;
    }
    .product-image-wrapper {
      border-radius: 18px;
      overflow: hidden;
      background: linear-gradient(135deg, #111827, #1f2937);
      height: 170px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 10px;
      position: relative;
    }
    .product-image-wrapper img {
      max-width: 100%;
      max-height: 100%;
      display: block;
      transform: scale(1.02);
      transition: transform 0.25s ease;
    }
    .product-card:hover img {
      transform: scale(1.06);
    }
    .badge-brand {
      position: absolute;
      top: 8px;
      left: 8px;
      padding: 4px 8px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.75);
      color: #e5e7eb;
      font-size: 11px;
    }

    .product-title {
      font-size: 15px;
      font-weight: 600;
      margin-bottom: 4px;
      min-height: 40px;
    }
    .product-tagline {
      font-size: 12px;
      color: #6b7280;
      margin-bottom: 6px;
    }
    .product-price-row {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 10px;
    }
    .product-price {
      font-size: 16px;
      font-weight: 700;
      color: var(--primary-dark);
    }
    .product-price span {
      font-size: 12px;
      color: #9ca3af;
      margin-left: 4px;
    }
    .product-actions {
      display: flex;
      gap: 8px;
      margin-top: auto;
    }
    .btn {
      border-radius: 999px;
      padding: 7px 11px;
      font-size: 13px;
      font-weight: 500;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      border: none;
      transition: background 0.18s, transform 0.18s, box-shadow 0.18s;
      white-space: nowrap;
    }
    .btn-primary {
      background: var(--primary);
      color: #fff;
      box-shadow: 0 10px 28px rgba(79, 70, 229, 0.6);
      flex: 1;
    }
    .btn-primary:hover {
      background: #4338ca;
      transform: translateY(-1px);
    }
    .btn-outline {
      background: #fff;
      border: 1px solid #e5e7eb;
      color: #4b5563;
      flex: 1;
    }
    .btn-outline:hover {
      background: #f9fafb;
      transform: translateY(-1px);
    }

    /* ========== MINI CART ========== */
    .cart-panel {
      position: fixed;
      top: 66px;
      right: 14px;
      width: 320px;
      max-height: 70vh;
      background: #fff;
      border-radius: 20px;
      box-shadow: var(--shadow-soft);
      z-index: 60;
      display: none;
      flex-direction: column;
      overflow: hidden;
    }
    .cart-panel.open {
      display: flex;
    }
    .cart-header {
      padding: 12px 14px 8px;
      border-bottom: 1px solid #e5e7eb;
      font-weight: 600;
      font-size: 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .cart-body {
      padding: 10px 14px;
      overflow-y: auto;
      flex: 1;
      font-size: 13px;
    }
    .cart-empty {
      text-align: center;
      padding: 22px 0;
      color: #9ca3af;
    }
    .cart-item {
      display: grid;
      grid-template-columns: 56px 1fr auto;
      gap: 8px;
      align-items: center;
      margin-bottom: 10px;
    }
    .cart-item img {
      width: 56px;
      height: 40px;
      object-fit: cover;
      border-radius: 10px;
    }
    .cart-item-title {
      font-weight: 500;
      margin-bottom: 3px;
    }
    .cart-item-qty {
      color: #6b7280;
      font-size: 12px;
    }
    .cart-item-price {
      font-weight: 600;
      font-size: 13px;
      text-align: right;
    }
    .cart-remove {
      margin-top: 4px;
      font-size: 11px;
      color: #9ca3af;
      cursor: pointer;
      text-align: right;
    }
    .cart-footer {
      border-top: 1px solid #e5e7eb;
      padding: 10px 14px 12px;
    }
    .cart-total-row {
      display: flex;
      justify-content: space-between;
      font-size: 14px;
      margin-bottom: 8px;
    }
    .cart-actions {
      display: flex;
      gap: 8px;
    }
    .btn-sm {
      padding: 6px 10px;
      font-size: 12px;
    }

    /* ========== MODAL CHUNG ========== */
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.65);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 70;
      padding: 14px;
    }
    .modal-backdrop.open {
      display: flex;
    }
    .modal {
      background: #ffffff;
      border-radius: 24px;
      box-shadow: var(--shadow-soft);
      max-width: 420px;
      width: 100%;
      max-height: 90vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }
    .modal-header {
      padding: 14px 18px 10px;
      border-bottom: 1px solid #e5e7eb;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .modal-title {
      font-weight: 600;
      font-size: 16px;
    }
    .modal-close {
      font-size: 18px;
      cursor: pointer;
      opacity: 0.55;
    }
    .modal-close:hover {
      opacity: 0.9;
    }
    .modal-body {
      padding: 14px 18px 18px;
      font-size: 14px;
      overflow-y: auto;
    }
    .modal-footer {
      border-top: 1px solid #e5e7eb;
      padding: 10px 18px 14px;
      text-align: right;
    }

    /* ========== MODAL AUTH ========== */
    .auth-tabs {
      display: flex;
      border-radius: 999px;
      background: #f3f4ff;
      padding: 3px;
      margin-bottom: 14px;
    }
    .auth-tab {
      flex: 1;
      text-align: center;
      padding: 6px 0;
      border-radius: 999px;
      font-size: 13px;
      cursor: pointer;
    }
    .auth-tab.active {
      background: #ffffff;
      box-shadow: 0 8px 22px rgba(79, 70, 229, 0.3);
      color: var(--primary-dark);
      font-weight: 600;
    }
    .form-group {
      margin-bottom: 10px;
    }
    .form-group label {
      display: block;
      font-size: 13px;
      margin-bottom: 4px;
    }
    .form-group input,
    .form-group textarea {
      width: 100%;
      border-radius: 999px;
      border: 1px solid #e5e7eb;
      padding: 7px 11px;
      font-size: 14px;
      outline: none;
      transition: border-color 0.18s, box-shadow 0.18s;
    }
    .form-group textarea {
      border-radius: 14px;
      resize: vertical;
      min-height: 60px;
    }
    .form-group input:focus,
    .form-group textarea:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 1px rgba(79, 70, 229, 0.2);
    }
    .form-help {
      font-size: 12px;
      color: #9ca3af;
      margin-top: 2px;
    }
    .error-text {
      font-size: 12px;
      color: var(--danger);
      margin-top: 4px;
    }

    /* ========== MODAL CHI TI·∫æT XE ========== */
    .detail-modal {
      max-width: 760px;
    }
    .detail-layout {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1fr);
      gap: 16px;
    }
    @media (max-width: 820px) {
      .detail-layout {
        grid-template-columns: 1fr;
      }
    }
    .detail-image {
      border-radius: 18px;
      overflow: hidden;
      background: radial-gradient(circle at 0% 0%, #1e293b, #020617);
      height: 260px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .detail-image img {
      max-width: 100%;
      max-height: 100%;
      animation: carZoom 7s ease-in-out infinite alternate;
      filter: drop-shadow(0 18px 45px rgba(15, 23, 42, 0.9));
    }
    @keyframes carZoom {
      from {
        transform: scale(1) translateX(0);
      }
      to {
        transform: scale(1.06) translateX(6px);
      }
    }
    .detail-specs {
      font-size: 13px;
    }
    .detail-specs h3 {
      font-size: 16px;
      margin-bottom: 6px;
    }
    .detail-specs p {
      margin-bottom: 6px;
      color: #4b5563;
    }
    .detail-list {
      margin-top: 6px;
    }
    .detail-list li {
      display: flex;
      gap: 6px;
      margin-bottom: 4px;
    }
    .detail-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #10b981;
      margin-top: 5px;
    }

    /* ========== CHECKOUT OVERLAY ========== */
    .checkout-overlay {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.82);
      display: none;
      z-index: 65;
      overflow-y: auto;
      padding: 20px;
    }
    .checkout-overlay.open {
      display: block;
    }
    .checkout-card {
      max-width: 960px;
      margin: 0 auto;
      background: #f9fafb;
      border-radius: 24px;
      box-shadow: var(--shadow-soft);
      padding: 20px 22px 24px;
    }
    .checkout-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 14px;
    }
    .checkout-header h2 {
      font-size: 20px;
    }
    .checkout-close {
      font-size: 22px;
      cursor: pointer;
      opacity: 0.6;
    }
    .checkout-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.3fr) minmax(0, 1fr);
      gap: 16px;
      margin-top: 8px;
    }
    @media (max-width: 880px) {
      .checkout-grid {
        grid-template-columns: 1fr;
      }
    }
    .checkout-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
      background: #fff;
      border-radius: 16px;
      overflow: hidden;
    }
    .checkout-table th,
    .checkout-table td {
      padding: 8px 10px;
      border-bottom: 1px solid #e5e7eb;
    }
    .checkout-table th {
      background: #f3f4ff;
      text-align: left;
    }
    .checkout-table tfoot td {
      font-weight: 600;
      background: #f9fafb;
    }

    .checkout-section-title {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 6px;
    }
    .radio-group {
      display: flex;
      flex-direction: column;
      gap: 6px;
      font-size: 13px;
      margin-top: 4px;
    }
    .qr-placeholder {
      margin-top: 8px;
      border-radius: 16px;
      border: 2px dashed #c4b5fd;
      background: #eef2ff;
      padding: 18px;
      text-align: center;
      font-size: 13px;
      color: #4b5563;
    }

    .checkout-footer {
      margin-top: 16px;
      display: flex;
      justify-content: flex-end;
    }

    /* ========== CHATBOT FLOAT ========== */
    .chat-toggle {
      position: fixed;
      bottom: 22px;
      right: 22px;
      width: 54px;
      height: 54px;
      border-radius: 50%;
      background: var(--primary);
      color: #fff;
      box-shadow: 0 18px 40px rgba(79, 70, 229, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
      z-index: 55;
    }
    .chat-window {
      position: fixed;
      bottom: 90px;
      right: 20px;
      width: 320px;
      max-height: 440px;
      background: #fff;
      border-radius: 22px;
      box-shadow: var(--shadow-soft);
      display: none;
      flex-direction: column;
      overflow: hidden;
      z-index: 55;
    }
    .chat-window.open {
      display: flex;
    }
    .chat-header {
      padding: 10px 12px;
      background: linear-gradient(90deg, #4f46e5, #7c3aed);
      color: #f9fafb;
      font-size: 14px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .chat-body {
      padding: 10px 10px 6px;
      flex: 1;
      overflow-y: auto;
      background: #f3f4ff;
      font-size: 13px;
    }
    .chat-message {
      margin-bottom: 8px;
      display: flex;
    }
    .chat-message.bot {
      justify-content: flex-start;
    }
    .chat-message.user {
      justify-content: flex-end;
    }
    .chat-bubble {
      max-width: 80%;
      padding: 7px 10px;
      border-radius: 14px;
    }
    .chat-bubble.bot {
      background: #ffffff;
      border-bottom-left-radius: 4px;
    }
    .chat-bubble.user {
      background: #4f46e5;
      color: #fff;
      border-bottom-right-radius: 4px;
    }
    .chat-input-row {
      padding: 8px 8px 10px;
      border-top: 1px solid #e5e7eb;
      display: flex;
      gap: 6px;
    }
    .chat-input-row input {
      flex: 1;
      border-radius: 999px;
      border: 1px solid #e5e7eb;
      padding: 6px 10px;
      font-size: 13px;
      outline: none;
    }

    /* ========== FOOTER ========== */
    footer {
      background: #020617;
      color: #9ca3af;
      font-size: 12px;
      padding: 12px 16px;
    }
    .footer-inner {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }
  </style>
</head>
<body>
  <!-- ========== HEADER ========== -->
  <header>
    <div class="header-inner">
      <div class="logo">
        <div class="logo-icon">R</div>
        <div>
          <div class="logo-text-main">RoyalCars</div>
          <div class="logo-text-sub">Luxury Auto Boutique</div>
        </div>
      </div>

      <nav>
        <a href="#gioi-thieu">Gi·ªõi thi·ªáu</a>
        <a href="#san-pham">Xe h√†ng hi·ªáu</a>
        <a href="#lien-he">Li√™n h·ªá</a>
      </nav>

      <div class="header-right">
        <button class="icon-btn" title="Th√¥ng b√°o">
          üîî
        </button>

        <div class="account-wrapper">
          <button class="icon-btn avatar" id="avatarButton" title="T√†i kho·∫£n">
            <span id="avatarInitial">?</span>
          </button>
          <div class="account-menu" id="accountMenu">
            <button id="accountInfoBtn">T√†i kho·∫£n c·ªßa t√¥i</button>
            <button id="ordersBtn">ƒê∆°n h√†ng c·ªßa t√¥i</button>
            <button id="settingsBtn">C√†i ƒë·∫∑t t√†i kho·∫£n</button>
            <button id="logoutBtn" style="color:#ef4444;">ƒêƒÉng xu·∫•t</button>
          </div>
        </div>

        <button class="icon-btn cart-btn" id="cartButton" title="Gi·ªè h√†ng">
          üõí
          <span class="icon-badge" id="cartCount">0</span>
        </button>
      </div>
    </div>
  </header>

  <!-- ========== HERO ========== -->
  <section class="hero">
    <div class="hero-inner">
      <div class="hero-copy">
        <h1>Showroom √¥ t√¥ h√†ng hi·ªáu cho gi·ªõi th∆∞·ª£ng l∆∞u</h1>
        <p>
          RoyalCars l√† m√¥ h√¨nh kinh doanh √¥ t√¥ sang tr·ªçng v·ªõi c√°c th∆∞∆°ng hi·ªáu
          Mercedes-Benz, BMW, Audi, Lexus, Porsche‚Ä¶ d√†nh cho kh√°ch h√†ng th√≠ch
          tr·∫£i nghi·ªám ƒë·∫≥ng c·∫•p 5 sao.
        </p>
        <div class="hero-badges">
          <div class="hero-badge">Giao xe to√†n qu·ªëc</div>
          <div class="hero-badge">T∆∞ v·∫•n t√†i ch√≠nh & leasing</div>
          <div class="hero-badge">B·∫£o h√†nh ch√≠nh h√£ng</div>
        </div>
        <div class="hero-cta">
          <button class="hero-cta-primary" onclick="scrollToProducts()">
            Kh√°m ph√° xe ngay
          </button>
          <button class="hero-cta-secondary" onclick="openChatFromHero()">
            Chat v·ªõi chuy√™n gia t∆∞ v·∫•n
          </button>
        </div>
      </div>

      <div class="hero-slider" aria-label="B·ªô s∆∞u t·∫≠p xe n·ªïi b·∫≠t">
        <div
          class="hero-slide active"
          data-index="0"
          style="background-image: url('images/hero-mercedes.jpg');"
        >
          <div class="hero-slide-content">
            <div class="hero-slide-title">Mercedes-Maybach S-Class</div>
            <div class="hero-slide-line">
              Gh·∫ø th∆∞∆°ng gia, massage 4 v√πng, g√≥i Chauffeur Package cho ch·ªß t·ªãch.
            </div>
          </div>
        </div>
        <div
          class="hero-slide"
          data-index="1"
          style="background-image: url('images/hero-bmw.jpg');"
        >
          <div class="hero-slide-content">
            <div class="hero-slide-title">BMW X7 M Sport</div>
            <div class="hero-slide-line">
              SUV 7 ch·ªó h·∫°ng sang, ph√π h·ª£p gia ƒë√¨nh tr·∫ª th√†nh ƒë·∫°t.
            </div>
          </div>
        </div>
        <div
          class="hero-slide"
          data-index="2"
          style="background-image: url('images/hero-porsche.jpg');"
        >
          <div class="hero-slide-content">
            <div class="hero-slide-title">Porsche 911 Turbo S</div>
            <div class="hero-slide-line">
              Bi·ªÉu t∆∞·ª£ng t·ªëc ƒë·ªô, tƒÉng t·ªëc 0‚Äì100 km/h trong ~2.7 gi√¢y.
            </div>
          </div>
        </div>
        <div class="hero-dots">
          <div class="hero-dot active" data-index="0"></div>
          <div class="hero-dot" data-index="1"></div>
          <div class="hero-dot" data-index="2"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- ========== MAIN ========== -->
  <main>
    <!-- Gi·ªõi thi·ªáu -->
    <section class="about" id="gioi-thieu">
      <div>
        <h2>V·ªÅ RoyalCars</h2>
        <p>
          M√¥ h√¨nh kinh doanh c·ªßa nh√≥m l√† showroom √¥ t√¥ h√†ng hi·ªáu tr√™n n·ªÅn t·∫£ng
          th∆∞∆°ng m·∫°i ƒëi·ªán t·ª≠. Kh√°ch h√†ng c√≥ th·ªÉ ch·ªçn xe, c·∫•u h√¨nh g√≥i d·ªãch v·ª•
          v√† ƒë·∫∑t c·ªçc tr·ª±c tuy·∫øn, sau ƒë√≥ nh·∫≠n t∆∞ v·∫•n 1‚Äì1 t·ª´ chuy√™n vi√™n b√°n h√†ng.
        </p>
        <ul class="about-list">
          <li>
            <span class="bullet"></span>
            <span>ƒê·ªëi t∆∞·ª£ng kh√°ch h√†ng: doanh nh√¢n, ch·ªß doanh nghi·ªáp, KOL, ng∆∞·ªùi thu nh·∫≠p cao t·∫°i Vi·ªát Nam.</span>
          </li>
          <li>
            <span class="bullet"></span>
            <span>Chu·ªói cung ·ª©ng: h·ª£p t√°c c√πng ƒë·∫°i l√Ω ch√≠nh h√£ng & ƒë·ªëi t√°c nh·∫≠p kh·∫©u t∆∞ nh√¢n uy t√≠n.</span>
          </li>
          <li>
            <span class="bullet"></span>
            <span>H√¨nh th·ª©c doanh thu: b√°n xe, b√°n g√≥i chƒÉm s√≥c xe, hoa h·ªìng t√†i ch√≠nh & b·∫£o hi·ªÉm.</span>
          </li>
        </ul>
      </div>
      <div class="social-block" id="lien-he">
        <div class="social-title">K·∫øt n·ªëi v·ªõi RoyalCars</div>
        <p class="form-help" style="margin-bottom:8px;">
          ƒê√¢y c≈©ng l√† n∆°i Nh√≥m 3 gi·ªõi thi·ªáu th√†nh vi√™n & x√¢y d·ª±ng th∆∞∆°ng hi·ªáu c√° nh√¢n.
        </p>
        <p class="form-help" style="margin-bottom:8px;"> Th√†nh Vi√™n G·ªìm: L√™ ƒê·ª©c Huy, Nguy·ªÖn Trung ki√™n, ƒê·∫∑ng Gia Kh√°ch, L√™ ƒê·ª©c Vi·ªát </p>
        <div class="social-links">
          <a
            class="facebook"
            href="https://www.facebook.com/le.uc.huy.167899"
            target="_blank"
            rel="noopener"
          >
            <span class="icon">f</span>
            <span>Facebook</span>
          </a>
          <a
            class="tiktok"
            href="https://www.tiktok.com/@huyken2607"
            target="_blank"
            rel="noopener"
          >
            <span class="icon">‚ô¨</span>
            <span>TikTok</span>
          </a>
          <a
            class="instagram"
            href="https://www.instagram.com/huyleaz2004/"
            target="_blank"
            rel="noopener"
          >
            <span class="icon">‚óé</span>
            <span>Instagram</span>
          </a>
        </div>
        <p class="form-help" style="margin-top:10px;">
          Email li√™n h·ªá showroom : huyleaz2004@gmail.com </p>
        <p class="form-help" style="margin-bottom:8px;"> Hotline: 0328 262 653 </p>
      </div>
    </section>

    <!-- S·∫¢N PH·∫®M -->
    <section id="san-pham">
      <div class="section-header">
        <div>
          <h2>B·ªô s∆∞u t·∫≠p √¥ t√¥ h√†ng hi·ªáu</h2>
          <p>Ch·ªçn theo th∆∞∆°ng hi·ªáu ƒë·ªÉ xem 5 m·∫´u xe ti√™u bi·ªÉu c·ªßa t·ª´ng h√£ng.</p>
        </div>
        <div class="brand-filters" id="brandFilters">
          <button class="brand-filter active" data-brand="all">T·∫•t c·∫£</button>
          <button class="brand-filter" data-brand="mercedes">Mercedes-Benz</button>
          <button class="brand-filter" data-brand="bmw">BMW</button>
          <button class="brand-filter" data-brand="audi">Audi</button>
          <button class="brand-filter" data-brand="lexus">Lexus</button>
          <button class="brand-filter" data-brand="porsche">Porsche</button>
        </div>
      </div>

      <div class="product-grid" id="productGrid">
        <!-- JS s·∫Ω render th·∫ª xe v√†o ƒë√¢y -->
      </div>
    </section>
  </main>

  <!-- ========== MINI CART ========== -->
  <div class="cart-panel" id="cartPanel">
    <div class="cart-header">
      <span>Gi·ªè h√†ng</span>
      <button class="modal-close" id="closeCartBtn">&times;</button>
    </div>
    <div class="cart-body" id="cartBody"></div>
    <div class="cart-footer">
      <div class="cart-total-row">
        <span>T·ªïng:</span>
        <span id="cartTotal">0ƒë</span>
      </div>
      <div class="cart-actions">
        <button class="btn btn-outline btn-sm" id="cartOrdersBtn">ƒê∆°n h√†ng</button>
        <button class="btn btn-primary btn-sm" id="checkoutBtn">Thanh to√°n</button>
      </div>
    </div>
  </div>

  <!-- ========== MODAL AUTH (ƒêƒÇNG NH·∫¨P / ƒêƒÇNG K√ù) ========== -->
  <div class="modal-backdrop" id="authBackdrop">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title" id="authTitle">ƒêƒÉng nh·∫≠p</div>
        <div class="modal-close" id="authClose">&times;</div>
      </div>
      <div class="modal-body">
        <div class="auth-tabs">
          <div class="auth-tab active" data-tab="login">ƒêƒÉng nh·∫≠p</div>
          <div class="auth-tab" data-tab="register">ƒêƒÉng k√Ω</div>
        </div>

        <!-- Form ƒëƒÉng nh·∫≠p -->
        <form id="loginForm">
          <div class="form-group">
            <label for="loginEmail">Email</label>
            <input id="loginEmail" type="email" required />
          </div>
          <div class="form-group">
            <label for="loginPassword">M·∫≠t kh·∫©u</label>
            <input id="loginPassword" type="password" required />
          </div>
          <div class="error-text" id="loginError" style="display:none;"></div>
          <div class="form-help">
            ƒê√¢y l√† ch·ª©c nƒÉng demo, d·ªØ li·ªáu ch·ªâ l∆∞u trong tr√¨nh duy·ªát (localStorage).
          </div>
          <div class="modal-footer" style="padding:10px 0 0;">
            <button type="submit" class="btn btn-primary" style="width:100%;">
              ƒêƒÉng nh·∫≠p
            </button>
          </div>
        </form>

        <!-- Form ƒëƒÉng k√Ω -->
        <form id="registerForm" style="display:none;">
          <div class="form-group">
            <label for="regName">H·ªç t√™n</label>
            <input id="regName" required />
          </div>
          <div class="form-group">
            <label for="regEmail">Email</label>
            <input id="regEmail" type="email" required />
          </div>
          <div class="form-group">
            <label for="regPassword">M·∫≠t kh·∫©u</label>
            <input id="regPassword" type="password" minlength="4" required />
          </div>
          <div class="error-text" id="registerError" style="display:none;"></div>
          <div class="form-help">
            T√†i kho·∫£n ƒë∆∞·ª£c l∆∞u t·∫°m tr√™n m√°y ƒë·ªÉ ph·ª•c v·ª• demo ƒëƒÉng nh·∫≠p.
          </div>
          <div class="modal-footer" style="padding:10px 0 0;">
            <button type="submit" class="btn btn-primary" style="width:100%;">
              ƒêƒÉng k√Ω
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- ========== MODAL TH√îNG TIN T√ÄI KHO·∫¢N ========== -->
  <div class="modal-backdrop" id="accountBackdrop">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title">T√†i kho·∫£n kh√°ch h√†ng</div>
        <div class="modal-close" id="accountClose">&times;</div>
      </div>
      <div class="modal-body" id="accountInfoBody">
        <!-- JS s·∫Ω ƒëi·ªÅn th√¥ng tin -->
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline" id="accountCloseBtn">ƒê√≥ng</button>
      </div>
    </div>
  </div>

  <!-- ========== MODAL CHI TI·∫æT XE ========== -->
  <div class="modal-backdrop" id="detailBackdrop">
    <div class="modal detail-modal">
      <div class="modal-header">
        <div class="modal-title" id="detailTitle">Chi ti·∫øt xe</div>
        <div class="modal-close" id="detailClose">&times;</div>
      </div>
      <div class="modal-body">
        <div class="detail-layout">
          <div class="detail-image">
            <img id="detailImage" src="" alt="H√¨nh xe" />
          </div>
          <div class="detail-specs">
            <h3 id="detailName"></h3>
            <p id="detailBrand"></p>
            <p id="detailPrice"></p>
            <p id="detailDesc"></p>
            <ul class="detail-list" id="detailHighlights">
              <!-- JS s·∫Ω ƒë·ªï bullet points -->
            </ul>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button
          class="btn btn-outline"
          onclick="document.getElementById('detailBackdrop').classList.remove('open');"
        >
          ƒê√≥ng
        </button>
        <button class="btn btn-primary" id="detailAddToCartBtn">
          Th√™m v√†o gi·ªè
        </button>
      </div>
    </div>
  </div>

  <!-- ========== OVERLAY THANH TO√ÅN ========== -->
  <div class="checkout-overlay" id="checkoutOverlay">
    <div class="checkout-card">
      <div class="checkout-header">
        <h2>Thanh to√°n</h2>
        <div class="checkout-close" id="checkoutClose">&times;</div>
      </div>
      <p style="font-size:13px;color:#6b7280;margin-bottom:8px;">
        ƒê√¢y l√† giao di·ªán demo quy tr√¨nh thanh to√°n: xem l·∫°i ƒë∆°n h√†ng, nh·∫≠p th√¥ng
        tin giao h√†ng v√† ch·ªçn h√¨nh th·ª©c thanh to√°n (ti·ªÅn m·∫∑t ho·∫∑c chuy·ªÉn kho·∫£n QR).
      </p>

      <div class="checkout-grid">
        <div>
          <div class="checkout-section-title">Th√¥ng tin ƒë∆°n h√†ng</div>
          <table class="checkout-table" id="checkoutTable">
            <thead>
              <tr>
                <th>S·∫£n ph·∫©m</th>
                <th>S·ªë l∆∞·ª£ng</th>
                <th>Gi√°</th>
              </tr>
            </thead>
            <tbody></tbody>
            <tfoot>
              <tr>
                <td colspan="2">T·ªïng</td>
                <td id="checkoutTotal">0ƒë</td>
              </tr>
            </tfoot>
          </table>
        </div>

        <div>
          <div class="checkout-section-title">Th√¥ng tin giao h√†ng</div>
          <form id="checkoutForm">
            <div class="form-group">
              <label for="shipName">H·ªç t√™n</label>
              <input id="shipName" required />
            </div>
            <div class="form-group">
              <label for="shipPhone">S·ªë ƒëi·ªán tho·∫°i</label>
              <input id="shipPhone" required />
            </div>
            <div class="form-group">
              <label for="shipAddress">ƒê·ªãa ch·ªâ chi ti·∫øt</label>
              <textarea id="shipAddress" required></textarea>
            </div>

            <div class="checkout-section-title" style="margin-top:8px;">
              Ph∆∞∆°ng th·ª©c thanh to√°n
            </div>
            <div class="radio-group">
              <label>
                <input
                  type="radio"
                  name="payment"
                  value="cod"
                  checked
                  onclick="toggleQr(false)"
                />
                Thanh to√°n khi nh·∫≠n (COD)
              </label>
              <label>
                <input
                  type="radio"
                  name="payment"
                  value="qr"
                  onclick="toggleQr(true)"
                />
                Chuy·ªÉn kho·∫£n (QR demo)
              </label>
            </div>
            <div class="qr-placeholder" id="qrBox" style="display:none;">
              <strong>M√£ QR thanh to√°n (demo)</strong>
              <div style="margin-top:6px;">
                ·ªû b·∫£n tri·ªÉn khai th·ª±c t·∫ø, khu v·ª±c n√†y s·∫Ω hi·ªÉn th·ªã h√¨nh ·∫£nh QR c·ªßa
                showroom (Momo, VietQR, ...). Trong b√†i t·∫≠p n√†y, m√£ QR ch·ªâ mang
                t√≠nh minh h·ªça quy tr√¨nh.
              </div>
            </div>
          </form>
        </div>
      </div>

      <div class="checkout-footer">
        <button class="btn btn-primary" id="confirmOrderBtn">
          X√°c nh·∫≠n &amp; ƒê·∫∑t h√†ng
        </button>
      </div>
    </div>
  </div>

  <!-- ========== CHATBOT ========== -->
  <button class="chat-toggle" id="chatToggle" title="Chat t∆∞ v·∫•n">
    üí¨
  </button>
  <div class="chat-window" id="chatWindow">
    <div class="chat-header">
      <span>Tr·ª£ l√Ω RoyalCars</span>
      <button
        style="background:none;border:none;color:#e5e7eb;font-size:18px;"
        onclick="toggleChat(false)"
      >
        &times;
      </button>
    </div>
    <div class="chat-body" id="chatBody"></div>
    <form class="chat-input-row" id="chatForm">
      <input
        id="chatInput"
        type="text"
        placeholder="Nh·∫≠p c√¢u h·ªèi v·ªÅ xe..."
        autocomplete="off"
      />
      <button class="btn btn-primary btn-sm" type="submit">G·ª≠i</button>
    </form>
  </div>

  <!-- ========== FOOTER ========== -->
  <footer>
    <div class="footer-inner">
      <div>¬© 2025 RoyalCars ‚Äì Demo m√¥ h√¨nh kinh doanh TMƒêT √¥ t√¥ h√†ng hi·ªáu.</div>
      <div>Hotline t∆∞ v·∫•n: 09xx xxx xxx (gi·∫£ l·∫≠p)</div>
    </div>
  </footer>

  <!-- ========== SCRIPT ========== -->
  <script>
    /* ===================== D·ªÆ LI·ªÜU S·∫¢N PH·∫®M ===================== */
    const products = [
      // Mercedes (5 xe)
      {
        id: "mer-s-class",
        brand: "mercedes",
        brandLabel: "Mercedes-Benz",
        name: "Mercedes-Maybach S 680",
        tagline: "Sedan si√™u sang cho ch·ªß t·ªãch",
        price: 16000000000,
        image: "images/mercedes-s-class.jpg",
        desc: "Phi√™n b·∫£n Maybach S 680 v·ªõi khoang sau th∆∞∆°ng gia, c·ª≠a h√≠t, r√®m ƒëi·ªán, √¢m thanh Burmester cao c·∫•p.",
        highlights: [
          "Gh·∫ø th∆∞∆°ng gia ch·ªânh ƒëi·ªán, massage nhi·ªÅu ch·∫ø ƒë·ªô.",
          "C√°ch √¢m khoang cabin g·∫ßn nh∆∞ tuy·ªát ƒë·ªëi.",
          "ƒê·ªông c∆° V12, v·∫≠n h√†nh √™m √°i nh∆∞ng v·∫´n r·∫•t m·∫°nh m·∫Ω."
        ]
      },
      {
        id: "mer-g-class",
        brand: "mercedes",
        brandLabel: "Mercedes-Benz",
        name: "Mercedes-AMG G 63",
        tagline: "SUV ƒë·ªãa h√¨nh bi·ªÉu t∆∞·ª£ng",
        price: 13000000000,
        image: "images/mercedes-g63.jpg",
        desc: "G-Class l√† bi·ªÉu t∆∞·ª£ng ƒë·ªãa h√¨nh v√† ƒë·ªô sang ch·∫£nh, ph√° c√°ch nh∆∞ng v·∫´n c·ª±c k·ª≥ uy l·ª±c.",
        highlights: [
          "Thi·∫øt k·∫ø vu√¥ng v·ª©c, nh·∫≠n di·ªán t·ª´ xa.",
          "√Çm thanh ·ªëng x·∫£ AMG c·ª±c k·ª≥ ph·∫•n kh√≠ch.",
          "Khoang n·ªôi th·∫•t da Nappa, ·ªëp g·ªó cao c·∫•p."
        ]
      },
      {
        id: "mer-gls",
        brand: "mercedes",
        brandLabel: "Mercedes-Benz",
        name: "Mercedes-Maybach GLS 600",
        tagline: "SUV 4 ch·ªó chu·∫©n chuy√™n c∆° m·∫∑t ƒë·∫•t",
        price: 15000000000,
        image: "images/mercedes-gls600.jpg",
        desc: "GLS 600 d√†nh cho kh√°ch h√†ng th√≠ch ng·ªìi cao, khoang sau 2 gh·∫ø VIP ng·∫£ g·∫ßn nh∆∞ ph·∫≥ng.",
        highlights: [
          "H·ªá th·ªëng treo E-Active Body Control √™m m∆∞·ª£t.",
          "T·ªß l·∫°nh mini & b√†n l√†m vi·ªác g·∫≠p.",
          "√Çm thanh 3D Burmester, ƒë√®n n·ªôi th·∫•t 64 m√†u."
        ]
      },
      {
        id: "mer-eqs",
        brand: "mercedes",
        brandLabel: "Mercedes-Benz",
        name: "Mercedes-Benz EQS 580",
        tagline: "Sedan ƒëi·ªán h·∫°ng sang t∆∞∆°ng lai",
        price: 9000000000,
        image: "images/mercedes-eqs.jpg",
        desc: "EQS l√† d√≤ng xe ƒëi·ªán cao c·∫•p v·ªõi thi·∫øt k·∫ø kh√≠ ƒë·ªông h·ªçc v√† m√†n h√¨nh Hyperscreen c·ª±c ·∫•n t∆∞·ª£ng.",
        highlights: [
          "T·∫ßm ho·∫°t ƒë·ªông WLTP l√™n t·ªõi ~700 km (t√πy phi√™n b·∫£n).",
          "N·ªôi th·∫•t full da & g·ªó, m√†n h√¨nh cong to√†n chi·ªÅu ngang.",
          "Nhi·ªÅu tr·ª£ l√Ω l√°i Level 2 h·ªó tr·ª£ t·ª± ƒë·ªông."
        ]
      },
      {
        id: "mer-coupe",
        brand: "mercedes",
        brandLabel: "Mercedes-Benz",
        name: "Mercedes-AMG GT 63 S",
        tagline: "Coupe 4 c·ª≠a hi·ªáu nƒÉng cao",
        price: 11000000000,
        image: "images/mercedes-amg-gt.jpg",
        desc: "K·∫øt h·ª£p s·ª± th·ª±c d·ª•ng c·ªßa 4 c·ª≠a v√† c·∫£m gi√°c l√°i th·ªÉ thao thu·∫ßn ch·∫•t AMG.",
        highlights: [
          "ƒê·ªông c∆° V8 Biturbo v·ªõi c√¥ng su·∫•t c·ª±c l·ªõn.",
          "Ch·∫ø ƒë·ªô Race & Drift cho tr·∫£i nghi·ªám ƒë∆∞·ªùng ƒëua.",
          "N·ªôi th·∫•t th·ªÉ thao v·ªõi gh·∫ø bucket AMG."
        ]
      },
      // BMW (5 xe)
      {
        id: "bmw-7",
        brand: "bmw",
        brandLabel: "BMW",
        name: "BMW 740i M Sport",
        tagline: "Sedan sang tr·ªçng d√†nh cho doanh nh√¢n",
        price: 7500000000,
        image: "images/bmw-7series.jpg",
        desc: "BMW 7-Series c√¢n b·∫±ng gi·ªØa s·ª± sang tr·ªçng v√† c·∫£m gi√°c l√°i ƒë·∫∑c tr∆∞ng c·ªßa BMW.",
        highlights: [
          "H·ªá truy·ªÅn ƒë·ªông √™m √°i, h∆∞·ªõng ƒë·∫øn ng∆∞·ªùi t·ª± c·∫ßm l√°i.",
          "H·ªá th·ªëng iDrive th·∫ø h·ªá m·ªõi, h·ªó tr·ª£ gesture control.",
          "ƒê√®n Ambient Light & c·ª≠a s·ªï tr·ªùi to√†n c·∫£nh."
        ]
      },
      {
        id: "bmw-x7",
        brand: "bmw",
        brandLabel: "BMW",
        name: "BMW X7 xDrive40i",
        tagline: "SUV 7 ch·ªó cao c·∫•p",
        price: 6800000000,
        image: "images/bmw-x7.jpg",
        desc: "X7 ph√π h·ª£p gia ƒë√¨nh ƒë√¥ng ng∆∞·ªùi c·∫ßn kh√¥ng gian r·ªông nh∆∞ng v·∫´n mu·ªën ƒëi xe sang.",
        highlights: [
          "Ba h√†ng gh·∫ø r·ªông r√£i, c√≥ t√πy ch·ªçn 6 gh·∫ø.",
          "T√πy ch·ªçn g√≥i M Sport v·ªõi ngo·∫°i th·∫•t th·ªÉ thao.",
          "Khoang l√°i m√†n h√¨nh cong BMW Curved Display."
        ]
      },
      {
        id: "bmw-i7",
        brand: "bmw",
        brandLabel: "BMW",
        name: "BMW i7 xDrive60",
        tagline: "Sedan ƒëi·ªán flagship",
        price: 9500000000,
        image: "images/bmw-i7.jpg",
        desc: "i7 l√† m·∫´u sedan ƒëi·ªán cao c·∫•p v·ªõi tr·∫£i nghi·ªám c√¥ng ngh·ªá ƒë·ªôc ƒë√°o.",
        highlights: [
          "M√†n h√¨nh r·∫°p phim 31\" cho h√†ng gh·∫ø sau.",
          "Gh·∫ø VIP c√≥ ch·ª©c nƒÉng massage, s∆∞·ªüi, l√†m m√°t.",
          "T√πy ch·ªçn g√≥i Bowers & Wilkins Diamond Surround."
        ]
      },
      {
        id: "bmw-m5",
        brand: "bmw",
        brandLabel: "BMW",
        name: "BMW M5 Competition",
        tagline: "Sedan hi·ªáu nƒÉng cao",
        price: 8500000000,
        image: "images/bmw-m5.jpg",
        desc: "M5 Competition l√† l·ª±a ch·ªçn cho kh√°ch h√†ng th√≠ch c·∫£m gi√°c l√°i m·∫°nh m·∫Ω nh∆∞ng v·∫´n c·∫ßn 4 c·ª≠a.",
        highlights: [
          "C√¥ng su·∫•t h∆°n 600 m√£ l·ª±c (t√πy c·∫•u h√¨nh).",
          "Ch·∫ø ƒë·ªô M xDrive c√≥ th·ªÉ chuy·ªÉn sang RWD.",
          "Phanh M Sport & gh·∫ø th·ªÉ thao √¥m s√°t."
        ]
      },
      {
        id: "bmw-x6",
        brand: "bmw",
        brandLabel: "BMW",
        name: "BMW X6 M Sport",
        tagline: "SUV coupe phong c√°ch",
        price: 6200000000,
        image: "images/bmw-x6.jpg",
        desc: "X6 d√†nh cho kh√°ch h√†ng y√™u thi·∫øt k·∫ø th·ªÉ thao kh√°c bi·ªát so v·ªõi SUV truy·ªÅn th·ªëng.",
        highlights: [
          "Thi·∫øt k·∫ø coupe c√° t√≠nh, ƒëu√¥i xe ƒë·∫≠m ch·∫•t th·ªÉ thao.",
          "G√≥i √°nh s√°ng Iconic Glow ·ªü l∆∞·ªõi t·∫£n nhi·ªát (t√πy b·∫£n).",
          "Nhi·ªÅu ch·∫ø ƒë·ªô l√°i t√πy ch·ªânh linh ho·∫°t."
        ]
      },
      // Audi (5 xe)
      {
        id: "audi-a8",
        brand: "audi",
        brandLabel: "Audi",
        name: "Audi A8L",
        tagline: "Sedan h·∫°ng sang c√¥ng ngh·ªá cao",
        price: 7200000000,
        image: "images/audi-a8.jpg",
        desc: "A8L mang phong c√°ch t·ªëi gi·∫£n nh∆∞ng hi·ªán ƒë·∫°i v·ªõi h·ªá th·ªëng ƒë√®n Matrix LED ƒë·∫∑c tr∆∞ng.",
        highlights: [
          "Khung g·∫ßm nh√¥m & h·ªá th·ªëng treo kh√≠ n√©n √™m √°i.",
          "N·ªôi th·∫•t 3 m√†n h√¨nh c·∫£m ·ª©ng cao c·∫•p.",
          "Gh·∫ø sau c√≥ th·ªÉ ng·∫£ k√®m massage & ƒë·ª° ch√¢n."
        ]
      },
      {
        id: "audi-q8",
        brand: "audi",
        brandLabel: "Audi",
        name: "Audi Q8",
        tagline: "SUV coupe sang tr·ªçng",
        price: 5200000000,
        image: "images/audi-q8.jpg",
        desc: "Q8 ph√π h·ª£p kh√°ch h√†ng tr·∫ª trung th√≠ch phong c√°ch th·ªÉ thao nh∆∞ng v·∫´n ti·ªán nghi.",
        highlights: [
          "Thi·∫øt k·∫ø coupe m·∫°nh m·∫Ω, l∆∞·ªõi t·∫£n nhi·ªát Singleframe.",
          "H·ªá th·ªëng quattro tr·ª© danh c·ªßa Audi.",
          "C·ª•m ƒë√®n h·∫≠u OLED n·ªëi li·ªÅn to√†n chi·ªÅu ngang."
        ]
      },
      {
        id: "audi-rs6",
        brand: "audi",
        brandLabel: "Audi",
        name: "Audi RS6 Avant",
        tagline: "Si√™u wagon m·∫°nh m·∫Ω",
        price: 8000000000,
        image: "images/audi-rs6.jpg",
        desc: "RS6 l√† m·∫´u wagon hi·ªáu nƒÉng c·ª±c cao nh∆∞ng v·∫´n ch·ªü ƒë∆∞·ª£c c·∫£ gia ƒë√¨nh.",
        highlights: [
          "ƒê·ªông c∆° V8 tƒÉng √°p k√©p, c√¥ng su·∫•t c·ª±c l·ªõn.",
          "Khoang h√†nh l√Ω r·ªông r√£i, ti·ªán cho nhu c·∫ßu gia ƒë√¨nh.",
          "√Çm thanh RS ƒë·∫∑c tr∆∞ng, c√≥ th·ªÉ ƒëi·ªÅu ch·ªânh √™m/·ªìn."
        ]
      },
      {
        id: "audi-etron",
        brand: "audi",
        brandLabel: "Audi",
        name: "Audi e-tron GT",
        tagline: "Coupe ƒëi·ªán 4 c·ª≠a",
        price: 7600000000,
        image: "images/audi-etron-gt.jpg",
        desc: "e-tron GT l√† m·∫´u xe ƒëi·ªán th·ªÉ thao, chia s·∫ª n·ªÅn t·∫£ng v·ªõi Porsche Taycan.",
        highlights: [
          "Thi·∫øt k·∫ø kh√≠ ƒë·ªông h·ªçc, tr·ªçng t√¢m th·∫•p.",
          "S·∫°c nhanh DC c√¥ng su·∫•t cao (t√πy tr·∫°m).",
          "Nhi·ªÅu ch·∫ø ƒë·ªô l√°i t·ª´ √™m √°i ƒë·∫øn th·ªÉ thao."
        ]
      },
      {
        id: "audi-r8",
        brand: "audi",
        brandLabel: "Audi",
        name: "Audi R8 V10 Performance",
        tagline: "Si√™u xe ƒë·ªông c∆° ƒë·∫∑t gi·ªØa",
        price: 15000000000,
        image: "images/audi-r8.jpg",
        desc: "R8 l√† si√™u xe v·ªõi ƒë·ªông c∆° V10 n·∫°p kh√≠ t·ª± nhi√™n, √¢m thanh c·ª±c k·ª≥ ph·∫•n kh√≠ch.",
        highlights: [
          "Khung g·∫ßm Audi Space Frame nh·∫π nh∆∞ng c·ª©ng v·ªØng.",
          "H·ªá d·∫´n ƒë·ªông quattro t·ªëi ∆∞u ƒë·ªô b√°m ƒë∆∞·ªùng.",
          "Khoang l√°i t·∫≠p trung cho ng∆∞·ªùi c·∫ßm l√°i."
        ]
      },
      // Lexus (5 xe)
      {
        id: "lexus-ls",
        brand: "lexus",
        brandLabel: "Lexus",
        name: "Lexus LS 500h",
        tagline: "Sedan sang tr·ªçng ch√∫ tr·ªçng s·ª± √™m √°i",
        price: 6800000000,
        image: "images/lexus-ls.jpg",
        desc: "LS 500h l√† m·∫´u sedan sang ƒë·∫ßu b·∫£ng c·ªßa Lexus, n·ªïi ti·∫øng v·ªÅ ƒë·ªô b·ªÅn v√† s·ª± y√™n tƒ©nh.",
        highlights: [
          "Gh·∫ø tr∆∞·ªõc & sau ch·ªânh ƒëi·ªán, l√†m m√°t & s∆∞·ªüi.",
          "C·ª≠a h√≠t, r√®m che n·∫Øng, tr·∫ßn b·ªçc da l·ªôn.",
          "√Çm thanh Mark Levinson cao c·∫•p."
        ]
      },
      {
        id: "lexus-lx",
        brand: "lexus",
        brandLabel: "Lexus",
        name: "Lexus LX 600",
        tagline: "SUV full-size cao c·∫•p",
        price: 9300000000,
        image: "images/lexus-lx600.jpg",
        desc: "LX 600 d·ª±a tr√™n n·ªÅn t·∫£ng Land Cruiser m·ªõi, n·ªïi ti·∫øng v·ªÅ ƒë·ªô b·ªÅn v√† kh·∫£ nƒÉng v∆∞·ª£t ƒë·ªãa h√¨nh.",
        highlights: [
          "Khung g·∫ßm body-on-frame c·ª©ng c√°p.",
          "N·ªôi th·∫•t 3 h√†ng gh·∫ø r·ªông, nhi·ªÅu ti·ªán nghi.",
          "H·ªá d·∫´n ƒë·ªông 4 b√°nh to√†n th·ªùi gian."
        ]
      },
      {
        id: "lexus-lc",
        brand: "lexus",
        brandLabel: "Lexus",
        name: "Lexus LC 500",
        tagline: "Coupe th·ªÉ thao cao c·∫•p",
        price: 8000000000,
        image: "images/lexus-lc500.jpg",
        desc: "LC 500 s·ªü h·ªØu thi·∫øt k·∫ø c·ª±c k·ª≥ ·∫•n t∆∞·ª£ng, l√† m·∫´u xe tr∆∞ng b√†y ho√†n h·∫£o tr∆∞·ªõc showroom.",
        highlights: [
          "ƒê·ªông c∆° V8 h√∫t kh√≠ t·ª± nhi√™n √¢m thanh quy·∫øn r≈©.",
          "N·ªôi th·∫•t l·∫•y c·∫£m h·ª©ng t·ª´ ngh·ªá thu·∫≠t Nh·∫≠t B·∫£n.",
          "H·ªá th·ªëng treo th√≠ch ·ª©ng gi√∫p xe v·∫´n √™m khi ch·∫°y ph·ªë."
        ]
      },
      {
        id: "lexus-rx",
        brand: "lexus",
        brandLabel: "Lexus",
        name: "Lexus RX 500h F Sport",
        tagline: "SUV h·∫°ng sang hybrid",
        price: 4800000000,
        image: "images/lexus-rx500h.jpg",
        desc: "RX l√† d√≤ng SUV b√°n ch·∫°y c·ªßa Lexus, c√¢n b·∫±ng gi·ªØa ti·∫øt ki·ªám v√† sang tr·ªçng.",
        highlights: [
          "H·ªá truy·ªÅn ƒë·ªông hybrid ti·∫øt ki·ªám nhi√™n li·ªáu.",
          "Gh·∫ø r·ªông r√£i, ch·∫•t li·ªáu da m·ªÅm, ho√†n thi·ªán tinh x·∫£o.",
          "H·ªá th·ªëng an to√†n Lexus Safety System+."
        ]
      },
      {
        id: "lexus-lm",
        brand: "lexus",
        brandLabel: "Lexus",
        name: "Lexus LM 350h",
        tagline: "MPV si√™u sang cho doanh nh√¢n",
        price: 9500000000,
        image: "images/lexus-lm350.jpg",
        desc: "LM l√† m·∫´u MPV 4 gh·∫ø si√™u sang, thi·∫øt k·∫ø nh∆∞ ph√≤ng kh√°ch di ƒë·ªông.",
        highlights: [
          "V√°ch ngƒÉn gi·ªØa khoang l√°i v√† khoang VIP.",
          "M√†n h√¨nh gi·∫£i tr√≠ 48 inch cho gh·∫ø sau.",
          "Gh·∫ø VIP c√≥ ƒë·ªám ƒë·ª° ch√¢n, massage to√†n th√¢n."
        ]
      },
      // Porsche (5 xe)
      {
        id: "porsche-911",
        brand: "porsche",
        brandLabel: "Porsche",
        name: "Porsche 911 Turbo S",
        tagline: "Bi·ªÉu t∆∞·ª£ng th·ªÉ thao",
        price: 14000000000,
        image: "images/porsche-911.jpg",
        desc: "911 Turbo S l√† m·∫´u xe c√¢n b·∫±ng gi·ªØa t·ªëc ƒë·ªô, c·∫£m gi√°c l√°i v√† kh·∫£ nƒÉng s·ª≠ d·ª•ng h√†ng ng√†y.",
        highlights: [
          "TƒÉng t·ªëc 0‚Äì100 km/h c·ª±c nhanh (t√πy b·∫£n).",
          "H·ªá th·ªëng ƒë√°nh l√°i tr·ª•c sau tƒÉng ƒë·ªô linh ho·∫°t.",
          "N·ªôi th·∫•t da cao c·∫•p, b·∫£ng ƒë·ªìng h·ªì ƒë·∫∑c tr∆∞ng Porsche."
        ]
      },
      {
        id: "porsche-taycan",
        brand: "porsche",
        brandLabel: "Porsche",
        name: "Porsche Taycan Turbo S",
        tagline: "Si√™u xe ƒëi·ªán 4 c·ª≠a",
        price: 12000000000,
        image: "images/porsche-taycan.jpg",
        desc: "Taycan Turbo S l√† m·∫´u xe ƒëi·ªán hi·ªáu nƒÉng c·ª±c cao, tƒÉng t·ªëc ch√≥ng m·∫∑t.",
        highlights: [
          "H·ªá th·ªëng ƒëi·ªán 800V s·∫°c nhanh.",
          "Thi·∫øt k·∫ø kh√≠ ƒë·ªông h·ªçc, tr·ªçng t√¢m r·∫•t th·∫•p.",
          "N·ªôi th·∫•t hi·ªán ƒë·∫°i v·ªõi nhi·ªÅu m√†n h√¨nh."
        ]
      },
      {
        id: "porsche-panamera",
        brand: "porsche",
        brandLabel: "Porsche",
        name: "Porsche Panamera Turbo S",
        tagline: "Sedan th·ªÉ thao h·∫°ng sang",
        price: 12500000000,
        image: "images/porsche-panamera.jpg",
        desc: "Panamera d√†nh cho kh√°ch h√†ng mu·ªën 4 c·ª≠a nh∆∞ng v·∫´n gi·ªØ t√≠nh th·ªÉ thao ƒë·∫∑c tr∆∞ng.",
        highlights: [
          "Nhi·ªÅu c·∫•u h√¨nh ƒë·ªông c∆°, t·ª´ hybrid ƒë·∫øn V8.",
          "Khoang sau r·ªông, c√≥ t√πy ch·ªçn 4 gh·∫ø ri√™ng bi·ªát.",
          "H·ªá th·ªëng treo kh√≠ n√©n cho ph√©p n√¢ng/h·∫° g·∫ßm."
        ]
      },
      {
        id: "porsche-cayenne",
        brand: "porsche",
        brandLabel: "Porsche",
        name: "Porsche Cayenne Coupe",
        tagline: "SUV coupe hi·ªáu nƒÉng",
        price: 8000000000,
        image: "images/porsche-cayenne-coupe.jpg",
        desc: "Cayenne Coupe k·∫øt h·ª£p t√≠nh th·ª±c d·ª•ng c·ªßa SUV v·ªõi ki·ªÉu d√°ng th·ªÉ thao.",
        highlights: [
          "ƒê·ªông c∆° m·∫°nh, kh·∫£ nƒÉng tƒÉng t·ªëc ·∫•n t∆∞·ª£ng.",
          "Nhi·ªÅu ch·∫ø ƒë·ªô l√°i Sport, Sport Plus.",
          "N·ªôi th·∫•t sang tr·ªçng, gh·∫ø sau g·∫≠p linh ho·∫°t."
        ]
      },
      {
        id: "porsche-macan",
        brand: "porsche",
        brandLabel: "Porsche",
        name: "Porsche Macan GTS",
        tagline: "SUV c·ª° nh·ªè th·ªÉ thao",
        price: 5500000000,
        image: "images/porsche-macan-gts.jpg",
        desc: "Macan GTS ph√π h·ª£p kh√°ch h√†ng tr·∫ª mu·ªën m·ªôt chi·∫øc SUV nh·ªè g·ªçn nh∆∞ng c·∫£m gi√°c l√°i r·∫•t ƒë√£.",
        highlights: [
          "Thi·∫øt l·∫≠p khung g·∫ßm & treo thi√™n v·ªÅ th·ªÉ thao.",
          "√Çm thanh ƒë·ªông c∆° ƒë·∫ßy c·∫£m x√∫c.",
          "Khoang n·ªôi th·∫•t v·∫´n ƒë·ªß cho gia ƒë√¨nh nh·ªè."
        ]
      }
    ];

    /* ===================== STATE ===================== */
    const CART_KEY = "royalcars_cart";
    const USERS_KEY = "royalcars_users";
    const CURRENT_USER_KEY = "royalcars_current_user";

    let cart = [];
    let currentUser = null;
    let currentDetailProductId = null;

    /* ===================== TI·ªÜN √çCH ===================== */
    function formatCurrency(vnd) {
      return vnd.toLocaleString("vi-VN") + "ƒë";
    }

    function saveCart() {
      localStorage.setItem(CART_KEY, JSON.stringify(cart));
    }

    function loadCart() {
      const stored = localStorage.getItem(CART_KEY);
      cart = stored ? JSON.parse(stored) : [];
      updateCartBadge();
    }

    function loadUser() {
      const stored = localStorage.getItem(CURRENT_USER_KEY);
      currentUser = stored ? JSON.parse(stored) : null;
      updateAvatar();
    }

    function getAllUsers() {
      const stored = localStorage.getItem(USERS_KEY);
      return stored ? JSON.parse(stored) : [];
    }

    function saveUsers(users) {
      localStorage.setItem(USERS_KEY, JSON.stringify(users));
    }

    /* ===================== RENDER S·∫¢N PH·∫®M ===================== */
    const productGrid = document.getElementById("productGrid");

    function renderProducts(filterBrand = "all") {
      productGrid.innerHTML = "";
      const filtered = products.filter(
        (p) => filterBrand === "all" || p.brand === filterBrand
      );
      filtered.forEach((p) => {
        const card = document.createElement("article");
        card.className = "product-card";
        card.innerHTML = `
          <div class="product-image-wrapper">
            <span class="badge-brand">${p.brandLabel}</span>
            <img src="${p.image}" alt="${p.name}" onerror="this.src='https://via.placeholder.com/350x200?text=${encodeURIComponent(
          p.brandLabel
        )}'" />
          </div>
          <h3 class="product-title">${p.name}</h3>
          <div class="product-tagline">${p.tagline}</div>
          <div class="product-price-row">
            <div class="product-price">${formatCurrency(
              p.price
            )}<span>/ chi·∫øc</span></div>
          </div>
          <div class="product-actions">
            <button class="btn btn-outline" onclick="openDetail('${
              p.id
            }')">Xem chi ti·∫øt</button>
            <button class="btn btn-primary" onclick="addToCart('${
              p.id
            }')">Th√™m v√†o gi·ªè</button>
          </div>
        `;
        productGrid.appendChild(card);
      });
    }

    /* ===================== FILTER BRAND ===================== */
    const brandFilters = document.getElementById("brandFilters");
    brandFilters.addEventListener("click", (e) => {
      const btn = e.target.closest(".brand-filter");
      if (!btn) return;
      const brand = btn.getAttribute("data-brand");
      document
        .querySelectorAll(".brand-filter")
        .forEach((b) => b.classList.remove("active"));
      btn.classList.add("active");
      renderProducts(brand);
    });

    /* ===================== GI·ªé H√ÄNG ===================== */
    function addToCart(productId) {
      const existing = cart.find((item) => item.id === productId);
      if (existing) {
        existing.qty += 1;
      } else {
        cart.push({ id: productId, qty: 1 });
      }
      saveCart();
      renderCart();
      openCart(true);
    }

    function removeFromCart(productId) {
      cart = cart.filter((item) => item.id !== productId);
      saveCart();
      renderCart();
    }

    const cartPanel = document.getElementById("cartPanel");
    const cartBody = document.getElementById("cartBody");
    const cartTotalEl = document.getElementById("cartTotal");
    const cartCountEl = document.getElementById("cartCount");

    function updateCartBadge() {
      const totalQty = cart.reduce((sum, item) => sum + item.qty, 0);
      cartCountEl.textContent = totalQty;
    }

    function renderCart() {
      cartBody.innerHTML = "";
      if (!cart.length) {
        cartBody.innerHTML =
          '<div class="cart-empty">Gi·ªè h√†ng tr·ªëng</div>';
        cartTotalEl.textContent = "0ƒë";
        updateCartBadge();
        return;
      }
      let total = 0;
      cart.forEach((item) => {
        const p = products.find((pr) => pr.id === item.id);
        if (!p) return;
        const itemTotal = p.price * item.qty;
        total += itemTotal;
        const row = document.createElement("div");
        row.className = "cart-item";
        row.innerHTML = `
          <img src="${p.image}" alt="${p.name}" onerror="this.src='https://via.placeholder.com/80x50?text=${encodeURIComponent(
          p.brandLabel
        )}'" />
          <div>
            <div class="cart-item-title">${p.name}</div>
            <div class="cart-item-qty">${item.qty} x ${formatCurrency(
          p.price
        )}</div>
            <div class="cart-remove" onclick="removeFromCart('${
              p.id
            }')">X√≥a</div>
          </div>
          <div class="cart-item-price">${formatCurrency(itemTotal)}</div>
        `;
        cartBody.appendChild(row);
      });
      cartTotalEl.textContent = formatCurrency(total);
      updateCartBadge();
    }

    function openCart(forceOpen) {
      const willOpen =
        typeof forceOpen === "boolean"
          ? forceOpen
          : !cartPanel.classList.contains("open");
      cartPanel.classList.toggle("open", willOpen);
    }

    document.getElementById("cartButton").addEventListener("click", () =>
      openCart()
    );
    document.getElementById("closeCartBtn").addEventListener("click", () =>
      openCart(false)
    );
    document.getElementById("cartOrdersBtn").addEventListener("click", () =>
      alert("Demo: Danh s√°ch ƒë∆°n h√†ng s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y.")
    );

    /* ===================== CHECKOUT ===================== */
    const checkoutOverlay = document.getElementById("checkoutOverlay");
    const checkoutTableBody = document.querySelector(
      "#checkoutTable tbody"
    );
    const checkoutTotal = document.getElementById("checkoutTotal");

    function openCheckout() {
      if (!cart.length) {
        alert("Gi·ªè h√†ng ƒëang tr·ªëng, h√£y th√™m xe tr∆∞·ªõc khi thanh to√°n.");
        return;
      }
      checkoutTableBody.innerHTML = "";
      let total = 0;
      cart.forEach((item) => {
        const p = products.find((pr) => pr.id === item.id);
        if (!p) return;
        const itemTotal = p.price * item.qty;
        total += itemTotal;
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${p.name}</td>
          <td>${item.qty}</td>
          <td>${formatCurrency(itemTotal)}</td>
        `;
        checkoutTableBody.appendChild(tr);
      });
      checkoutTotal.textContent = formatCurrency(total);
      checkoutOverlay.classList.add("open");
    }

    document.getElementById("checkoutBtn").addEventListener("click", () => {
      openCart(false);
      openCheckout();
    });
    document.getElementById("checkoutClose").addEventListener("click", () =>
      checkoutOverlay.classList.remove("open")
    );

    document
      .getElementById("confirmOrderBtn")
      .addEventListener("click", () => {
        const name = document.getElementById("shipName").value.trim();
        const phone = document.getElementById("shipPhone").value.trim();
        const addr = document.getElementById("shipAddress").value.trim();
        if (!name || !phone || !addr) {
          alert("Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin giao h√†ng (h·ªç t√™n, SƒêT, ƒë·ªãa ch·ªâ).");
          return;
        }
        alert(
          "ƒê∆°n h√†ng c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c ghi nh·∫≠n (demo). Th·ª±c t·∫ø h·ªá th·ªëng s·∫Ω l∆∞u ƒë∆°n & nh√¢n vi√™n s·∫Ω li√™n h·ªá l·∫°i."
        );
        cart = [];
        saveCart();
        renderCart();
        checkoutOverlay.classList.remove("open");
      });

    function toggleQr(show) {
      document.getElementById("qrBox").style.display = show
        ? "block"
        : "none";
    }

    /* ===================== AUTH (ƒêƒÇNG NH·∫¨P / ƒêƒÇNG K√ù) ===================== */
    const authBackdrop = document.getElementById("authBackdrop");
    const authTitle = document.getElementById("authTitle");
    const loginForm = document.getElementById("loginForm");
    const registerForm = document.getElementById("registerForm");
    const loginError = document.getElementById("loginError");
    const registerError = document.getElementById("registerError");

    function openAuth(tab = "login") {
      authBackdrop.classList.add("open");
      switchAuthTab(tab);
    }
    function closeAuth() {
      authBackdrop.classList.remove("open");
      loginError.style.display = "none";
      registerError.style.display = "none";
    }

    document.getElementById("authClose").addEventListener("click", closeAuth);
    authBackdrop.addEventListener("click", (e) => {
      if (e.target === authBackdrop) closeAuth();
    });

    document.querySelectorAll(".auth-tab").forEach((tab) => {
      tab.addEventListener("click", () => {
        switchAuthTab(tab.getAttribute("data-tab"));
      });
    });

    function switchAuthTab(tab) {
      document
        .querySelectorAll(".auth-tab")
        .forEach((t) => t.classList.remove("active"));
      document
        .querySelector(`.auth-tab[data-tab="${tab}"]`)
        .classList.add("active");
      if (tab === "login") {
        loginForm.style.display = "block";
        registerForm.style.display = "none";
        authTitle.textContent = "ƒêƒÉng nh·∫≠p";
      } else {
        loginForm.style.display = "none";
        registerForm.style.display = "block";
        authTitle.textContent = "ƒêƒÉng k√Ω";
      }
    }

    registerForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const name = document.getElementById("regName").value.trim();
      const email = document.getElementById("regEmail").value.trim();
      const pass = document.getElementById("regPassword").value.trim();
      if (!name || !email || !pass) return;
      let users = getAllUsers();
      if (users.find((u) => u.email === email)) {
        registerError.textContent = "Email ƒë√£ ƒë∆∞·ª£c ƒëƒÉng k√Ω.";
        registerError.style.display = "block";
        return;
      }
      users.push({ name, email, password: pass });
      saveUsers(users);
      registerError.style.display = "none";
      alert("ƒêƒÉng k√Ω th√†nh c√¥ng! Anh/ch·ªã c√≥ th·ªÉ ƒëƒÉng nh·∫≠p ngay b√¢y gi·ªù.");
      switchAuthTab("login");
    });

    loginForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const email = document.getElementById("loginEmail").value.trim();
      const pass = document.getElementById("loginPassword").value.trim();
      const users = getAllUsers();
      const user = users.find((u) => u.email === email && u.password === pass);
      if (!user) {
        loginError.textContent = "Email ho·∫∑c m·∫≠t kh·∫©u ch∆∞a ƒë√∫ng (demo).";
        loginError.style.display = "block";
        return;
      }
      loginError.style.display = "none";
      currentUser = { name: user.name, email: user.email };
      localStorage.setItem(CURRENT_USER_KEY, JSON.stringify(currentUser));
      updateAvatar();
      alert("ƒêƒÉng nh·∫≠p th√†nh c√¥ng (demo).");
      closeAuth();
    });

    /* ===================== AVATAR & ACCOUNT MENU ===================== */
    const avatarBtn = document.getElementById("avatarButton");
    const avatarInitial = document.getElementById("avatarInitial");
    const accountMenu = document.getElementById("accountMenu");

    function updateAvatar() {
      if (currentUser) {
        const c =
          currentUser.name && currentUser.name.trim()
            ? currentUser.name.trim()[0].toUpperCase()
            : "U";
        avatarInitial.textContent = c;
        accountMenu.style.display = "block";
      } else {
        avatarInitial.textContent = "?";
        accountMenu.style.display = "none";
      }
    }

    avatarBtn.addEventListener("click", () => {
      if (!currentUser) {
        openAuth("login");
        return;
      }
      accountMenu.classList.toggle("open");
    });

    document.addEventListener("click", (e) => {
      if (
        !e.target.closest(".account-wrapper") &&
        !e.target.closest("#authBackdrop")
      ) {
        accountMenu.classList.remove("open");
      }
    });

    document.getElementById("logoutBtn").addEventListener("click", () => {
      localStorage.removeItem(CURRENT_USER_KEY);
      currentUser = null;
      updateAvatar();
      accountMenu.classList.remove("open");
      alert("ƒê√£ ƒëƒÉng xu·∫•t (demo).");
    });

    /* MODAL TH√îNG TIN T√ÄI KHO·∫¢N */
    const accountBackdrop = document.getElementById("accountBackdrop");
    const accountInfoBody = document.getElementById("accountInfoBody");

    function openAccountInfo() {
      if (!currentUser) {
        openAuth("login");
        return;
      }
      accountInfoBody.innerHTML = `
        <p><strong>H·ªç t√™n:</strong> ${currentUser.name}</p>
        <p><strong>Email:</strong> ${currentUser.email}</p>
        <p class="form-help" style="margin-top:10px;">
          ƒê√¢y l√† t√†i kho·∫£n d√πng cho demo website. Trong m√¥ h√¨nh th·ª±c t·∫ø, h·ªá th·ªëng s·∫Ω
          l∆∞u l·ªãch s·ª≠ ƒë∆°n h√†ng, ƒëi·ªÉm t√≠ch l≈©y, quy·ªÅn l·ª£i th√†nh vi√™n VIP...
        </p>
      `;
      accountBackdrop.classList.add("open");
    }

    document
      .getElementById("accountInfoBtn")
      .addEventListener("click", () => {
        accountMenu.classList.remove("open");
        openAccountInfo();
      });
    document
      .getElementById("settingsBtn")
      .addEventListener("click", () => {
        accountMenu.classList.remove("open");
        openAccountInfo();
      });
    document.getElementById("ordersBtn").addEventListener("click", () => {
      accountMenu.classList.remove("open");
      alert(
        "Demo: trong b·∫£n ƒë·∫ßy ƒë·ªß, m√†n h√¨nh n√†y s·∫Ω hi·ªÉn th·ªã l·ªãch s·ª≠ c√°c ƒë∆°n h√†ng ƒë√£ ƒë·∫∑t."
      );
    });

    document.getElementById("accountClose").addEventListener("click", () =>
      accountBackdrop.classList.remove("open")
    );
    document.getElementById("accountCloseBtn").addEventListener("click", () =>
      accountBackdrop.classList.remove("open")
    );
    accountBackdrop.addEventListener("click", (e) => {
      if (e.target === accountBackdrop) {
        accountBackdrop.classList.remove("open");
      }
    });

    /* ===================== CHI TI·∫æT XE ===================== */
    const detailBackdrop = document.getElementById("detailBackdrop");
    const detailTitle = document.getElementById("detailTitle");
    const detailImage = document.getElementById("detailImage");
    const detailName = document.getElementById("detailName");
    const detailBrand = document.getElementById("detailBrand");
    const detailPrice = document.getElementById("detailPrice");
    const detailDesc = document.getElementById("detailDesc");
    const detailHighlights = document.getElementById("detailHighlights");
    const detailAddToCartBtn = document.getElementById("detailAddToCartBtn");

    function openDetail(productId) {
      const p = products.find((x) => x.id === productId);
      if (!p) return;
      currentDetailProductId = productId;
      detailTitle.textContent = p.name;
      detailImage.src = p.image;
      detailImage.onerror = function () {
        this.src =
          "https://via.placeholder.com/500x280?text=" +
          encodeURIComponent(p.brandLabel);
      };
      detailName.textContent = p.name;
      detailBrand.textContent = "Th∆∞∆°ng hi·ªáu: " + p.brandLabel;
      detailPrice.textContent = "Gi√° tham kh·∫£o: " + formatCurrency(p.price);
      detailDesc.textContent = p.desc;
      detailHighlights.innerHTML = "";
      p.highlights.forEach((h) => {
        const li = document.createElement("li");
        li.innerHTML = `<span class="detail-dot"></span><span>${h}</span>`;
        detailHighlights.appendChild(li);
      });
      detailBackdrop.classList.add("open");
    }

    detailAddToCartBtn.addEventListener("click", () => {
      if (currentDetailProductId) {
        addToCart(currentDetailProductId);
        detailBackdrop.classList.remove("open");
      }
    });

    document.getElementById("detailClose").addEventListener("click", () =>
      detailBackdrop.classList.remove("open")
    );
    detailBackdrop.addEventListener("click", (e) => {
      if (e.target === detailBackdrop) detailBackdrop.classList.remove("open");
    });

    /* ===================== HERO SLIDER ===================== */
    const slides = document.querySelectorAll(".hero-slide");
    const dots = document.querySelectorAll(".hero-dot");
    let currentSlide = 0;

    function showSlide(index) {
      slides.forEach((s) => s.classList.remove("active"));
      dots.forEach((d) => d.classList.remove("active"));
      slides[index].classList.add("active");
      dots[index].classList.add("active");
      currentSlide = index;
    }

    setInterval(() => {
      const next = (currentSlide + 1) % slides.length;
      showSlide(next);
    }, 5000);

    dots.forEach((dot) => {
      dot.addEventListener("click", () => {
        showSlide(parseInt(dot.getAttribute("data-index"), 10));
      });
    });

    function scrollToProducts() {
      document
        .getElementById("san-pham")
        .scrollIntoView({ behavior: "smooth" });
    }

    /* ===================== CHATBOT ===================== */
    const chatToggleBtn = document.getElementById("chatToggle");
    const chatWindow = document.getElementById("chatWindow");
    const chatBody = document.getElementById("chatBody");
    const chatForm = document.getElementById("chatForm");
    const chatInput = document.getElementById("chatInput");

    function toggleChat(show) {
      const willShow =
        typeof show === "boolean" ? show : !chatWindow.classList.contains("open");
      chatWindow.classList.toggle("open", willShow);
      if (willShow) chatInput.focus();
    }

    chatToggleBtn.addEventListener("click", () => toggleChat());

    function appendMessage(sender, text) {
      const msg = document.createElement("div");
      msg.className = "chat-message " + sender;
      const bubble = document.createElement("div");
      bubble.className = "chat-bubble " + sender;
      bubble.textContent = text;
      msg.appendChild(bubble);
      chatBody.appendChild(msg);
      chatBody.scrollTop = chatBody.scrollHeight;
    }

    function botReply(userText) {
      const lower = userText.toLowerCase();
      let reply =
        "C·∫£m ∆°n anh/ch·ªã ƒë√£ quan t√¢m. Nh√≥m s·∫Ω t∆∞ v·∫•n chi ti·∫øt trong b·∫£n tri·ªÉn khai th·ª±c t·∫ø.";
      if (lower.includes("mercedes") || lower.includes("maybach")) {
        reply =
          "V·ªõi ph√¢n kh√∫c Mercedes/Maybach, RoyalCars t·∫≠p trung v√†o S-Class, GLS v√† G-Class. Anh/ch·ªã c√≥ th·ªÉ ch·ªçn m·∫´u r·ªìi b·∫•m 'Th√™m v√†o gi·ªè' ƒë·ªÉ ƒë·∫∑t l·ªãch t∆∞ v·∫•n.";
      } else if (lower.includes("bmw")) {
        reply =
          "D√≤ng BMW hi·ªán c√≥ 7-Series, X7, i7, M5 v√† X6. Anh/ch·ªã th√≠ch c·∫£m gi√°c l√°i sport th√¨ n√™n xem M5 ho·∫∑c X6 M Sport.";
      } else if (lower.includes("porsche")) {
        reply =
          "Porsche ph√π h·ª£p kh√°ch h√†ng ƒëam m√™ t·ªëc ƒë·ªô. V·ªõi nhu c·∫ßu ƒëa d·ª•ng, anh/ch·ªã c√≥ th·ªÉ xem Cayenne Coupe ho·∫∑c Macan GTS; n·∫øu thu·∫ßn th·ªÉ thao th√¨ 911 Turbo S.";
      } else if (lower.includes("gi√°") || lower.includes("bao nhi√™u")) {
        reply =
          "Gi√° trong website l√† m·ª©c tham kh·∫£o (demo). Trong th·ª±c t·∫ø, gi√° s·∫Ω thay ƒë·ªïi theo c·∫•u h√¨nh, thu·∫ø v√† ch∆∞∆°ng tr√¨nh ∆∞u ƒë√£i.";
      }
      setTimeout(() => appendMessage("bot", reply), 500);
    }

    chatForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const text = chatInput.value.trim();
      if (!text) return;
      appendMessage("user", text);
      chatInput.value = "";
      botReply(text);
    });

    function openChatFromHero() {
      toggleChat(true);
      if (!chatBody.dataset.inited) {
        appendMessage(
          "bot",
          "Xin ch√†o, t√¥i l√† tr·ª£ l√Ω RoyalCars. Anh/ch·ªã mu·ªën quan t√¢m t·ªõi th∆∞∆°ng hi·ªáu n√†o: Mercedes, BMW, Audi, Lexus hay Porsche?"
        );
        chatBody.dataset.inited = "1";
      }
    }

    /* ===================== KH·ªûI T·∫†O ===================== */
    loadCart();
    loadUser();
    renderProducts("all");
    renderCart();
    // Ch√†o nh·∫π nh√†ng l·∫ßn ƒë·∫ßu
    setTimeout(() => {
      appendMessage(
        "bot",
        "Ch√†o m·ª´ng anh/ch·ªã ƒë·∫øn v·ªõi RoyalCars ‚Äì showroom √¥ t√¥ h√†ng hi·ªáu. N·∫øu c·∫ßn t∆∞ v·∫•n, h√£y b·∫•m n√∫t chat g√≥c ph·∫£i m√†n h√¨nh nh√©."
      );
      chatBody.dataset.inited = "1";
    }, 1200);
  </script>
</body>
</html>
